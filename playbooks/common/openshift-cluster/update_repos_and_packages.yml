---
- hosts: oo_hosts_to_update
  vars:
    openshift_deployment_type: "{{ deployment_type }}"
  roles:
  - role: rhel_subscribe
    when: deployment_type in ["enterprise", "atomic-enterprise", "openshift-enterprise"] and
          ansible_distribution == "RedHat" and not ( openshift_rhel_skip_subscription |
          default(lookup('oo_option', 'rhel_skip_subscription')) | default(rhsub_skip) |
          default(False) | bool )
  - openshift_repos
  - role: os_update_latest
    when: not (openshift_skip_pkg_update | default(lookup('oo_option', 'skip_pkg_update')) |
          default(False) | bool or openshift.common.is_containerized)
