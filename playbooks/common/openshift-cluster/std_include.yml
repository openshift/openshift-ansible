---
- name: Initialization Checkpoint Start
  hosts: localhost
  connection: local
  gather_facts: false
  roles:
  - installer_checkpoint
  tasks:
  - name: Set install initialization 'In Progress'
    set_stats:
      data:
        installer_phase_initialize: "In Progress"
      aggregate: false

- include: evaluate_groups.yml

- include: initialize_facts.yml

- include: sanity_checks.yml

- include: validate_hostnames.yml

- include: initialize_openshift_repos.yml

# openshift_setup_docker should be set a include task's variable.
# We only need to run setup_docker on first cluster install.
# We set openshift_setup_docker to True in playbooks/byo/openshift-cluster/config.yml
- include: setup_docker.yml
  when: openshift_setup_docker | default(False) | bool

- include: initialize_openshift_version.yml

- name: Initialization Checkpoint End
  hosts: localhost
  connection: local
  gather_facts: false
  tasks:
  - name: Set install initialization 'Complete'
    set_stats:
      data:
        installer_phase_initialize: "Complete"
      aggregate: false
