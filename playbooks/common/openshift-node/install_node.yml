---
- include_role:
    name: openshift_node_facts
  vars:
    r_openshift_node_facts_annotations: "{{ openshift_node_annotations | default(omit) }}"
    r_openshift_node_facts_debug_level: "{{ openshift_node_debug_level | default(openshift.common.debug_level) }}"
    r_openshift_node_facts_iptables_sync_period: "{{ openshift_node_iptables_sync_period | default(omit) }}"
    r_openshift_node_facts_kubelet_args: "{{ openshift_node_kubelet_args | default(omit) }}"
    r_openshift_node_facts_labels: "{{ lookup('oo_option', 'openshift_node_labels') | default( openshift_node_labels | default(none), true) }}"
    r_openshift_node_facts_oreg_url: "{{ oreg_url_node | default(oreg_url) | default(omit) }}"
    r_openshift_node_facts_schedulable: "{{ openshift_schedulable | default(openshift_scheduleable) | default(omit) }}"
    r_openshift_node_facts_sdn_mtu: "{{ openshift_node_sdn_mtu | default(omit) }}"
    r_openshift_node_facts_osn_storage_plugin_deps: "{{ osn_storage_plugin_deps | default(omit) }}"
    r_openshift_node_facts_set_node_ip: "{{ openshift_set_node_ip | default(omit) }}"
    r_openshift_node_facts_osn_image: "{{ osn_image | default(omit) }}"
    r_openshift_node_facts_osn_ovs_image: "{{ osn_ovs_image | default(omit) }}"
    r_openshift_node_facts_proxy_mode: "{{ openshift_node_proxy_mode | default(omit) }}"
    r_openshift_node_facts_local_quota_per_fsgroup: "{{ openshift_node_local_quota_per_fsgroup | default(omit) }}"
    r_openshift_node_facts_dns_ip: "{{ openshift_dns_ip | default(omit) }}"
    r_openshift_node_facts_env_vars: "{{ openshift_node_env_vars | default(omit) }}"

- include_role:
    name: openshift_node
  vars:
    openshift_ca_host: "{{ groups.oo_first_master.0 }}"
    r_openshift_node_is_containerized: "{{ openshift.common.is_containerized | default(omit) }}"
    r_openshift_node_is_atomic: "{{ openshift.common.is_atomic | default(omit) }}"
    r_openshift_node_deployment_type: "{{ deployment_type | default(omit) }}"
    r_openshift_node_disable_swap: "{{ openshift_disable_swap | default(omit) }}"
    r_openshift_node_image_tag: "{{ openshift_image_tag | default(omit) }}"
    r_openshift_node_pkg_version: "{{ openshift_pkg_version | default(omit) }}"
    r_openshift_node_docker_service_name: "{{ openshift.docker.service_name | default(omit) }}"
    r_openshift_node_cloudprovider_aws_access_key: "{{ openshift_cloudprovider_aws_access_key | default(omit) }}"
    r_openshift_node_cloudprovider_aws_secret_key: "{{ openshift_cloudprovider_aws_secret_key | default(omit) }}"
    r_openshift_node_cloudprovider_kind: "{{ openshift_cloudprovider_kind | default(omit) }}"
    r_openshift_node_master_sdn_cluster_network_cidr: "{{ hostvars[groups.oo_first_master.0].openshift.master.sdn_cluster_network_cidr | default(omit) }}"
    r_openshift_node_kubelet_args: "{{ openshift_node_kubelet_args | default(omit) }}"
    r_openshift_node_master_api_url: "{{ openshift_node_master_api_url | default(omit) }}"
    r_openshift_node_config_base: "{{ openshift.common.config_base | default(omit) }}"
    r_openshift_node_http_proxy: "{{ openshift.common.http_proxy if 'http_proxy' in openshift.common and openshift.common.http_proxy != '' else omit }}"
    r_openshift_node_https_proxy: "{{ openshift.common.https_proxy if 'http_proxy' in openshift.common and openshift.common.https_proxy != '' else omit }}"
    r_openshift_node_is_node_system_container: "{{ openshift.common.is_node_system_container | default(omit) }}"
    r_openshift_node_is_openvswitch_system_container: "{{ openshift.common.is_openvswitch_system_container | default(omit) }}"
    r_openshift_node_no_proxy: "{{ openshift.common.no_proxy | default(omit) }}"
    r_openshift_node_portal_net: "{{ openshift.common.portal_net | default(omit) }}"
    r_openshift_node_service_type: "{{ openshift.common.service_type | default(omit) }}"
    r_openshift_node_system_images_registry: "{{ openshift.common.system_images_registry | default(omit) }}"
    r_openshift_node_use_openshift_sdn: "{{ openshift.common.use_openshift_sdn | default(omit) }}"
    r_openshift_node_debug_level: "{{ openshift.node.debug_level | default(omit) }}"
    r_openshift_node_env_vars: "{{ openshift.node.env_vars | default(omit) }}"
    r_openshift_node_image: "{{ openshift.node.node_image | default(omit) }}"
    r_openshift_node_system_image: "{{ openshift.node.node_system_image | default(omit) }}"
    r_openshift_node_ovs_image: "{{ openshift.node.ovs_image | default(omit) }}"
    r_openshift_node_ovs_system_image: "{{ openshift.node.ovs_system_image | default(omit) }}"
    r_openshift_node_storage_plugin_deps: "{{ openshift.node.storage_plugin_deps | default(omit) }}"
    r_openshift_node_version_gte_3_6: "{{ openshift.common.version_gte_3_6 | default(omit) }}"
    r_openshift_node_dns_domain: "{{ openshift.common.dns_domain | default(omit) }}"
    r_openshift_node_dns_ip: "{{ openshift.node.dns_ip | default(omit) }}"
    r_openshift_node_version_gte_3_3_or_1_3: "{{ openshift.common.version_gte_3_3_or_1_3 | default(omit) }}"
    r_openshift_node_use_nuage: "{{ openshift.common.use_nuage | default(omit) }}"
    r_openshift_node_use_contiv: "{{ openshift.common.use_contiv | default(omit) }}"
    r_openshift_node_set_node_ip: "{{ openshift.node.set_node_ip | default(omit) }}"
    r_openshift_node_iptables_sync_period: "{{ openshift.node.iptables_sync_period | default(omit) }}"
    r_openshift_node_registry_url: "{{ openshift.node.registry_url | default(omit) }}"
    r_openshift_node_hostname: "{{ openshift.common.hostname | default(omit) }}"
    r_openshift_node_sdn_network_plugin_name: "{{ openshift.common.sdn_network_plugin_name | default(omit) }}"
    r_openshift_node_sdn_mtu: "{{ openshift.node.sdn_mtu | default(omit) }}"
    r_openshift_node_ip: "{{ openshift.common.ip | default(omit) }}"
    r_openshift_node_nodename: "{{ openshift.node.nodename | default(omit) }}"
    r_openshift_node_min_tls_version: "{{ openshift_node_min_tls_version | default(omit) }}"
    r_openshift_node_cipher_suites: "{{ openshift_node_cipher_suites | default(omit) }}"
    r_openshift_node_data_dir: "{{ openshift.common.data_dir | default(omit) }}"
    r_openshift_node_proxy_mode: "{{ openshift.node.proxy_mode | default(omit) }}"
    r_openshift_node_local_quota_per_fsgroup: "{{ openshift.node.local_quota_per_fsgroup | default(omit) }}"
    r_openshift_node_docker_gte_1_10: "{{ openshift.docker.gte_1_10 | default(omit) }}"
    r_openshift_node_use_calico: "{{ openshift.common.use_calico | default(omit) }}"
    r_openshift_node_use_dnsmasq: "{{ openshift.common.use_dnsmasq | default(omit) }}"
    r_openshift_node_port_range: "{{ openshift_node_port_range | default(omit) }}"
