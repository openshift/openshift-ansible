---
- name: Populate oo_hosts_to_update group
  hosts: localhost
  connection: local
  become: no
  gather_facts: no
  vars_files:
  - openshift-cluster/cluster_hosts.yml
  tasks:
  - name: Evaluate oo_hosts_to_update
    add_host:
      name: "{{ item }}"
      groups: oo_hosts_to_update
      openshift_cluster_id: "{{ cluster_id | default('default') }}"
      openshift_debug_level: 2
      openshift_deployment_type: "{{ deployment_type }}"
    with_items: "{{ g_all_hosts | default([]) }}"

- include: ../common/openshift-cluster/update_repos_and_packages.yml
