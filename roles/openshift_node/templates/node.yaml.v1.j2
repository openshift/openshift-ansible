allowDisabledDocker: false
apiVersion: v1
{% if r_openshift_node_version_gte_3_6 %}
dnsBindAddress: 127.0.0.1:53
dnsRecursiveResolvConf: /etc/origin/node/resolv.conf
{% endif %}
dnsDomain: {{ r_openshift_node_dns_domain }}
{% if r_openshift_node_dns_ip is defined %}
dnsIP: {{ r_openshift_node_dns_ip }}
{% endif %}
dockerConfig:
  execHandlerName: ""
iptablesSyncPeriod: "{{ r_openshift_node_iptables_sync_period }}"
imageConfig:
  format: {{ r_openshift_node_registry_url }}
  latest: false
kind: NodeConfig
kubeletArguments: {{ r_openshift_node_kubelet_args | to_padded_yaml(level=1) }}
{% if r_openshift_node_version_gte_3_3_or_1_3 | bool %}
masterClientConnectionOverrides:
  acceptContentTypes: application/vnd.kubernetes.protobuf,application/json
  contentType: application/vnd.kubernetes.protobuf
  burst: 200
  qps: 100
{% endif %}
masterKubeConfig: system:node:{{ r_openshift_node_hostname }}.kubeconfig
{% if r_openshift_node_use_openshift_sdn | bool %}
networkPluginName: {{ r_openshift_node_sdn_network_plugin_name }}
{% endif %}
# networkConfig struct introduced in origin 1.0.6 and OSE 3.0.2 which
# deprecates networkPluginName above. The two should match.
networkConfig:
   mtu: {{ r_openshift_node_sdn_mtu }}
{% if r_openshift_node_use_openshift_sdn | bool or r_openshift_node_use_nuage | bool or r_openshift_node_use_contiv | bool or r_openshift_node_sdn_network_plugin_name == 'cni' %}
   networkPluginName: {{ r_openshift_node_sdn_network_plugin_name }}
{% endif %}
{% if r_openshift_node_set_node_ip | bool %}
nodeIP: {{ r_openshift_node_ip }}
{% endif %}
nodeName: {{ r_openshift_node_nodename }}
podManifestConfig:
servingInfo:
  bindAddress: 0.0.0.0:10250
  certFile: server.crt
  clientCA: ca.crt
  keyFile: server.key
{% if r_openshift_node_min_tls_version is defined %}
  minTLSVersion: {{ r_openshift_node_min_tls_version }}
{% endif %}
{% if r_openshift_node_cipher_suites is defined %}
  cipherSuites:
{% for cipher_suite in r_openshift_node_cipher_suites %}
  - {{ cipher_suite }}
{% endfor %}
{% endif %}
volumeDirectory: {{ r_openshift_node_data_dir }}/openshift.local.volumes
proxyArguments:
  proxy-mode:
     - {{ r_openshift_node_proxy_mode }}
volumeConfig:
  localQuota:
    perFSGroup: {{ r_openshift_node_local_quota_per_fsgroup }}
