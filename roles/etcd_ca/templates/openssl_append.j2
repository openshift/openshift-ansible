
[ {{ r_etcd_common_req_ext }} ]
basicConstraints = critical,CA:FALSE
keyUsage         = digitalSignature,keyEncipherment
subjectAltName   = ${ENV::SAN}

[ {{ r_etcd_common_ca_name }} ]
dir             = {{ r_etcd_common_ca_dir }}
crl_dir         = {{ r_etcd_common_ca_crl_dir }}
database        = {{ r_etcd_common_ca_db }}
new_certs_dir   = {{ r_etcd_common_ca_new_certs_dir }}
certificate     = {{ r_etcd_common_ca_cert }}
serial          = {{ r_etcd_common_ca_serial }}
private_key     = {{ r_etcd_common_ca_key }}
crl_number      = {{ r_etcd_common_ca_crl_number }}
x509_extensions = {{ r_etcd_common_ca_exts_client }}
default_days    = {{ r_etcd_common_ca_default_days }}
default_md      = sha256
preserve        = no
name_opt        = ca_default
cert_opt        = ca_default
policy          = policy_anything
unique_subject  = no
copy_extensions = copy

[ {{ r_etcd_common_ca_exts_self }} ]
authorityKeyIdentifier = keyid,issuer
basicConstraints       = critical,CA:TRUE,pathlen:0
keyUsage               = critical,digitalSignature,keyEncipherment,keyCertSign
subjectKeyIdentifier   = hash

[ {{ r_etcd_common_ca_exts_peer }} ]
authorityKeyIdentifier = keyid,issuer:always
basicConstraints       = critical,CA:FALSE
extendedKeyUsage       = clientAuth,serverAuth
keyUsage               = digitalSignature,keyEncipherment
subjectKeyIdentifier   = hash

[ {{ r_etcd_common_ca_exts_server }} ]
authorityKeyIdentifier = keyid,issuer:always
basicConstraints       = critical,CA:FALSE
extendedKeyUsage       = serverAuth
keyUsage               = digitalSignature,keyEncipherment
subjectKeyIdentifier   = hash

[ {{ r_etcd_common_ca_exts_client }} ]
authorityKeyIdentifier = keyid,issuer:always
basicConstraints       = critical,CA:FALSE
extendedKeyUsage       = clientAuth
keyUsage               = digitalSignature,keyEncipherment
subjectKeyIdentifier   = hash
