---
- name: Create the key
  command: >
    openssl genrsa -out {{ nuage_master_key_path }} 4096  

- name: Create the req file
  command: >
    openssl req -key {{ nuage_master_key_path }} -new -out {{ nuage_master_crt_dir }}/restServer.req -subj "/CN=$({{ ansible_nodename }})"

- name: Generate the crt file
  command: >
     openssl x509 -req -in {{ nuage_master_crt_dir }}/restServer.req -CA {{ nuage_mon_ca_crt_tmp_dir }}/nuageMonCA.crt  -CAkey $REST_CA_KEY -CAserial $REST_CA_SERIAL \
         -out $REST_SERVER_CERT
