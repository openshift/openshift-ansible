---
- name: Install openssl
  action: "{{ ansible_pkg_mgr }} name=openssl state=present"
  when: not openshift.common.is_atomic | bool

- name: Create directory
  file: path={{ nuage_ca_dir }} state=directory

- name: Create CA key
  command: openssl genrsa -out {{ nuage_ca_key }} 4096
  run_once: true
  delegate_to: {{ groups.oo_first_master.0 }}
 
- name: Create CA crt
  command: openssl req -new -x509 -key {{ nuage_ca_key }} -out {{ nuage_ca_crt }} -subj "/CN=nuage-signer"
  run_once: true
  delegate_to: {{ groups.oo_first_master.0 }}
