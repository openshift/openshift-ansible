apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: "{{obj_name}}"
{% if labels is not defined %}
  labels:
    metrics-infra: support
{% elif labels %}
  labels:
{% for key, value in labels.iteritems() %}
    {{ key }}: {{ value }}
{% endfor %}
{% endif %}
{% if annotations is defined and annotations %}
  annotations:
{% for key,value in annotations.iteritems() %}
    {{key}}: {{value}}
{% endfor %}
{% endif %}
spec:
  accessModes:
{% for mode in access_modes %}
    - {{ mode }}
{% endfor %}
  resources:
    requests:
      storage: {{size}}
{% if openshift_metrics_cassandra_pvc_prefix is defined and openshift_metrics_cassandra_pvc_prefix %}
  selector:
    matchLabels:
      name: {{ openshift_metrics_cassandra_pvc_prefix }}
{% endif %}
