---
- name: Deploy OpenShift Router
  command: >
    {{ openshift.common.admin_binary }} router
    --create --replicas={{ openshift.master.infra_nodes | length }}
    --service-account=router --selector='{{ openshift.master.router_selector }}'
    --images='{{openshift.master.registry_url }}'
    --credentials={{ openshift_master_config_dir }}/openshift-router.kubeconfig
  register: router_results
  changed_when: "'service exists' not in router_results.stdout"
